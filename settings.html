---
layout: default
---

<h1>Settings</h1>
<div class="short"><hr /></div>
<h3>
	Welcome! You can customise colours and other settings here. They'll save when you press "Save".<br />
	You can revert your changes at any time by pressing "Reset".
</h3>
<h2>Colour Settings</h2>
<div class="short"><hr /></div>
<form id="colors">
	<ul>
		<li><input type="color" id="primary" value="{{ site.primary }}" />Primary Colour</li>
		<li><input type="color" id="secondary" value="{{ site.secondary }}" />Secondary Colour</li>
		<li><input type="color" id="background" value="{{ site.background }}" />Background Colour</li>
		<li><input type="color" id="foreground" value="{{ site.foreground }}" />Foreground Colour</li>
		<li><input type="color" id="highlight" value="{{ site.highlight }}" />Highlight Colour</li>
	</ul>
	<p><small><i>Some changes may not take effect until saved.</i></small></p>
	<input type="reset" />
	<input type="submit" value="Save & Update" />
</form>

<h2>Currency Settings</h2>
<div class="short"><hr /></div>
<h3>
	Some posts may contain currencies, e.g. £2 or 20 SEK.<br />
	We can automatically convert them for you.<br />
	Alternatively, you can keep the post's default currency by selecting "None".<br />
</h3>
<fieldset>
	<legend>Select what currency to automatically convert to:</legend>
	<form id="currency">
		<label><input type="radio" name="currency" value="original" />None, do not convert currencies.</label><br />
		<label><input type="radio" name="currency" value="gbp" />GBP (₤)</label><br />
		<label><input type="radio" name="currency" value="eur" />EUR (€)</label><br />
		<label><input type="radio" name="currency" value="usd" />USD ($)</label>
	</form>
	<p><small><i>You can still hover over the currencies to see their values in other currencies.</i></small></p>
</fieldset>
<div class="short" style="padding-bottom: 25px"><hr /></div>

<script>
function setColorHook(element, callback) {
	element.oninput = function(e) {
		callback(e.target.value);
	}
}

let primary = document.getElementById("primary");
let secondary = document.getElementById("secondary");
let background = document.getElementById("background");
let foreground = document.getElementById("foreground");
let highlight = document.getElementById("highlight");

{ let value = localStorage.getItem("primary"); if (value != null) { primary.value = value } }
{ let value = localStorage.getItem("secondary"); if (value != null) { secondary.value = value } }
{ let value = localStorage.getItem("background"); if (value != null) { background.value = value } }
{ let value = localStorage.getItem("foreground"); if (value != null) { foreground.value = value } }
{ let value = localStorage.getItem("highlight"); if (value != null) { highlight.value = value } }

setColorHook(background, setBackground);
setColorHook(foreground, setForeground);

let colors = document.getElementById("colors");
colors.onsubmit = function() {
	localStorage.setItem("primary", primary.value); setPrimary(primary.value);
	localStorage.setItem("secondary", secondary.value); setSecondary(secondary.value);
	localStorage.setItem("background", background.value);
	localStorage.setItem("foreground", foreground.value);
	localStorage.setItem("highlight", highlight.value); setHighlight(highlight.value);
	return false;
};
colors.onreset = function() {
	localStorage.removeItem("primary"); setPrimary("{{ site.primary }}")
	localStorage.removeItem("secondary"); setSecondary("{{ site.secondary }}");
	localStorage.removeItem("background"); setBackground("{{ site.background }}");
	localStorage.removeItem("foreground"); setForeground("{{ site.foreground }}");
	localStorage.removeItem("highlight"); setHighlight("{{ site.highlight }}");
}

{
	let value = localStorage.getItem("currency");
	if (value != null) {
		value = value.replace(/["\\]/g, "\\$&"); // $& == $0 in other languages
		document.querySelector("#currency input[value=\"" + value + "\"]").checked = true;
	}
}

for (let radio of document.querySelectorAll("#currency input[name=\"currency\"]")) {
	radio.onchange = function(e) {
		let value = document.querySelector("#currency input[name=\"currency\"]:checked").value;
		localStorage.setItem("currency", value);
	};
}
</script>
